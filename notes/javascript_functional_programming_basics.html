<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-02-03 Wed 04:40 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>javascript functional programming basics</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="John Doe" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel='stylesheet' href='../style.css' />
<link rel='stylesheet' href='/../res/main.css' />
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.cacheClassElem = elem.className;
         elem.cacheClassTarget = target.className;
         target.className = "code-highlighted";
         elem.className   = "code-highlighted";
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(elem.cacheClassElem)
         elem.className = elem.cacheClassElem;
       if(elem.cacheClassTarget)
         target.className = elem.cacheClassTarget;
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="/"> HOME </a>
</div><div id="content">
<h1 class="title">javascript functional programming basics</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org8a17ad7">1. Functional programming basics: javascript</a>
<ul>
<li><a href="#org1a5c0d2">1.1. Functions are first class citizens</a></li>
<li><a href="#org1b6fdf9">1.2. Mutation</a></li>
<li><a href="#org6480da2">1.3. Purity</a></li>
<li><a href="#org6d340f4">1.4. Encapsulation</a></li>
<li><a href="#org6f06c95">1.5. Higher order functions</a></li>
<li><a href="#org63df0cc">1.6. Function composition</a>
<ul>
<li><a href="#org65ce0d5">1.6.1. Partials</a></li>
<li><a href="#orgb108842">1.6.2. Currying</a></li>
<li><a href="#org0f2a7b1">1.6.3. composition</a></li>
</ul>
</li>
<li><a href="#org4c4ae8a">1.7. Ciao Ciao</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org8a17ad7" class="outline-2">
<h2 id="org8a17ad7"><span class="section-number-2">1</span> Functional programming basics: javascript</h2>
<div class="outline-text-2" id="text-1">
<p>
In this document, I go through some basic functional programming paradigms, as a sort of introduction. for me, functional programming is more of a collection of concepts than a full abstraction.  There is less &rsquo;a way to do things&rsquo;, and more a few grounding principles on how to keep code clean, understandable, and working well.
</p>

<p>
I discovered this kind of programming relatively late in my programming carreer, after working with someone who was very knowledgeable about this type of programming.  What I noticed was that bugs were easier to find and appeared less often.  Once I understood the basics, the code also became a lot easier to reason about.  Here I have tried to compile what I know.
</p>

<p>
This tutorial requires knowledge of the javascript <i>spread operator</i> (<code>[ ...things ]</code>) and <i>object destructuring</i> (<code>const { firstName } = person</code>),  as well as some rudimentary knowledge about <code>Promises</code>
</p>
</div>

<div id="outline-container-org1a5c0d2" class="outline-3">
<h3 id="org1a5c0d2"><span class="section-number-3">1.1</span> Functions are first class citizens</h3>
<div class="outline-text-3" id="text-1-1">
<p>
In javascript, functions are first class citizens.  This means that they are expressions as well as statements, and can be assigned to, and passed around in the same way that variables are.
</p>

<p>
To define a javascript function as a statement, you might do the following:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">function</span> <span style="color: #333;">add1</span><span style="color: #ccc8bc;">(</span><span style="color: #333;">x</span><span style="color: #ccc8bc;">)</span> <span style="color: #ccc8bc;">{</span> <span style="color: #bbbbbb; font-style: italic;">// </span><span style="color: #bbbbbb; font-style: italic;">we declare the function here</span>
  <span style="color: #db7093;">return</span> x + <span style="color: #db7093;">1</span><span style="color: #bbb8ab;">;</span> <span style="color: #bbbbbb; font-style: italic;">// </span><span style="color: #bbbbbb; font-style: italic;">here we return the value, which is also a statement</span>
<span style="color: #ccc8bc;">}</span>
</pre>
</div>
<p>
This creates a <i>named function</i>, that you can use by <i>reference</i>.  The function we created adds <code>1</code> to whatever variable we pass it.  The variable we pass to it is called an <i>argument.</i>
</p>

<p>
You can use this function by <i>calling</i> it:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #111; font-style: italic;">add1</span><span style="color: #ccc8bc;">(</span><span style="color: #db7093;">2</span><span style="color: #ccc8bc;">)</span> <span style="color: #bbbbbb; font-style: italic;">// </span><span style="color: #bbbbbb; font-style: italic;">call the function -&gt; this is an expression</span>
</pre>
</div>
<pre class="example">
3
</pre>


<p>
Newer versions of javascript additionally allow us to define functions as an <i>expression</i>. This is also called an  <i>anonymous function</i> or a <i>lambda</i>.
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #ccc8bc;">(</span>x<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #ccc8bc;">{</span>
  <span style="color: #db7093;">return</span> x + <span style="color: #db7093;">1</span><span style="color: #bbb8ab;">;</span>
<span style="color: #ccc8bc;">}</span>
</pre>
</div>
<pre class="example">
[Function: tsLastExpr]
</pre>


<p>
As we can see, the function on it&rsquo;s own is evaluated, as it is an <i>expression</i> and not a <i>statement</i>.
</p>

<p>
Modern javascript also allows us to define the expression without the brackets (<code>{}</code>). When defined like this, the <i>lambda function</i> return&rsquo;s it&rsquo;s only statement, allowing us to rewrite the function like this:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript">x =<span style="color: #bbb8ab;">&gt;</span> x + <span style="color: #db7093;">1</span>
</pre>
</div>
<pre class="example">
[Function: tsLastExpr]
</pre>


<p>
We can even assign the <i>function expression</i> to a variable, like this:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">add1</span> = x =<span style="color: #bbb8ab;">&gt;</span> x + <span style="color: #db7093;">1</span>
</pre>
</div>
<p>
Since we are using the <code>const</code> <i>statement</i> to assign the variable, the <i>expression</i> is no longer evaluated right away.
</p>

<p>
we can now use the <code>const add1</code> in the same way we used the named function:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #111; font-style: italic;">add1</span><span style="color: #ccc8bc;">(</span><span style="color: #db7093;">2</span><span style="color: #ccc8bc;">)</span>
</pre>
</div>
<pre class="example">
3
</pre>


<p>
If we don&rsquo;t want to assign the <i>function expression</i> to a variable, we could call the expression directly like this:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #ccc8bc;">(</span>x =<span style="color: #bbb8ab;">&gt;</span> x + <span style="color: #db7093;">1</span><span style="color: #ccc8bc;">)(</span><span style="color: #db7093;">5</span><span style="color: #ccc8bc;">)</span>
</pre>
</div>
<pre class="example">
6
</pre>


<p>
Functions as first class citizens allow us to use functions whenever we might use other expressions, such as <code>(1 + 1)</code>, or <code>(true =</code> false)=
</p>
</div>
</div>

<div id="outline-container-org1b6fdf9" class="outline-3">
<h3 id="org1b6fdf9"><span class="section-number-3">1.2</span> Mutation</h3>
<div class="outline-text-3" id="text-1-2">
<p>
<i>Mutation</i> is the concept allows variables in memory to be reassigned and altered.  In some purely functional languages, the language itself keeps this from happening, but javascript allows it.  This section will try to show how avoiding mutation can also help structure code in a clearer way and avoid bugs.
</p>

<p>
Javascript programmers use <code>const</code> to signify that a value will not be reassigned, and <code>let</code> (or an old-school <code>var</code>) to signify that it <i>will</i> change or be reassigned.
</p>

<p>
<code>let</code> allows values to be reassigned:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">let</span> <span style="color: #333;">b</span> = <span style="color: #666;">null</span><span style="color: #bbb8ab;">;</span>
b = <span style="color: teal;">"new value"</span><span style="color: #bbb8ab;">;</span>
b<span style="color: #bbb8ab;">;</span>
</pre>
</div>
<pre class="example">
new value
</pre>


<p>
whereas <code>const</code> will throw an error:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">a</span> = <span style="color: teal;">"this value will not change"</span><span style="color: #bbb8ab;">;</span>
a = <span style="color: #db7093;">3</span><span style="color: #bbb8ab;">;</span>
a<span style="color: #bbb8ab;">;</span>
</pre>
</div>
<pre class="example">
2:1 - Cannot assign to 'a' because it is a constant.
</pre>


<div class="org-src-container">
<pre class="src src-jupyter-typescript">
</pre>
</div>
<p>
However, <code>const</code> does not save us completely from mutation, as it allows for mutating the <i>object references</i>, as well as mutating arrays.  <code>const</code> simply saves a variable from being reassigned.
</p>

<p>
For example, you can mutate arrays which have been assigned to a <code>const</code>:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">k</span> = <span style="color: #ccc8bc;">[</span><span style="color: #db7093;">1</span><span style="color: #bbb8ab;">,</span> <span style="color: #db7093;">2</span><span style="color: #bbb8ab;">,</span> <span style="color: #db7093;">3</span><span style="color: #ccc8bc;">]</span><span style="color: #bbb8ab;">;</span>
k<span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">push</span><span style="color: #ccc8bc;">(</span><span style="color: #db7093;">4</span><span style="color: #ccc8bc;">)</span>
k
</pre>
</div>
<pre class="example">
[ 1, 2, 3, 4 ]
</pre>


<p>
In this case, the variable <code>k</code> has been <i>mutated</i>.
</p>

<p>
What I find ends up causing the most confusion, is that <i>object</i> keys can also be mutated freely:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">person</span> = <span style="color: #ccc8bc;">{</span> first<span style="color: #bbb8ab;">:</span> <span style="color: teal;">"Hannah"</span><span style="color: #bbb8ab;">,</span> last<span style="color: #bbb8ab;">:</span> <span style="color: teal;">"Arendt"</span> <span style="color: #ccc8bc;">}</span><span style="color: #bbb8ab;">;</span>

person<span style="color: #bbb8ab;">.</span>last = <span style="color: teal;">"new last name"</span>

person
</pre>
</div>
<pre class="example">
{ first: 'Hannah', last: 'new last name' }
</pre>


<p>
In this example, the object stored to the <code>person</code> reference has been changed by another statement.
</p>

<p>
In javascript functional programming, we <i>avoid mutating objects at all costs</i>. If we find ourselves mutating, we need to think about <i>why</i> we are doing it and <i>if we even need to</i>.
</p>

<p>
javascript is a particularly tricky language, because it is very unclear about which operations mutate and which do not.  It is just accumulated knowledge, and needs to be either memorized by the programmer or constantly referenced in the documentation.  For example, some array functions mutate the initial array including <code>pop</code>, <code>push</code>, <code>splice</code>, where others do not.
</p>

<p>
This is one of the many reasons that I use functional libraries for most array and object operations, because they offer a measure of consistency about how they operate. In my experience, a huge percentage of bugs arise out of misunderstandings about mutation. Take the following example:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">originalArray</span> = <span style="color: #ccc8bc;">[</span><span style="color: #db7093;">1</span><span style="color: #bbb8ab;">,</span> <span style="color: #db7093;">2</span><span style="color: #bbb8ab;">,</span> <span style="color: #db7093;">3</span><span style="color: #ccc8bc;">]</span>
<span style="color: #666;">const</span> <span style="color: #333;">newArray</span> = originalArray<span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">splice</span><span style="color: #ccc8bc;">(</span><span style="color: #db7093;">1</span><span style="color: #ccc8bc;">)</span>

originalArray
</pre>
</div>
<pre class="example">
[ 1 ]
</pre>


<p>
In this case, the original array was changed by the <code>splice</code> operation.
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript">newArray
</pre>
</div>

<pre class="example">
[ 2, 3 ]
</pre>


<p>
The new array contains a new array, which is the other side of the <code>splice</code>.
</p>
<pre class="example">
[ 2, 3 ]
</pre>


<p>
This example might seem self explanatory enough.  But does <code>concat</code> function in a similar way?
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">originalArray</span> = <span style="color: #ccc8bc;">[</span><span style="color: #db7093;">1</span><span style="color: #bbb8ab;">,</span> <span style="color: #db7093;">2</span><span style="color: #bbb8ab;">,</span> <span style="color: #db7093;">3</span><span style="color: #ccc8bc;">]</span>
<span style="color: #666;">const</span> <span style="color: #333;">newArray</span> = originalArray<span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">concat</span><span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">[</span><span style="color: #db7093;">4</span><span style="color: #bbb8ab;">,</span> <span style="color: #db7093;">5</span><span style="color: #bbb8ab;">,</span> <span style="color: #db7093;">6</span><span style="color: #ccc8bc;">]</span><span style="color: #ccc8bc;">)</span>

originalArray
</pre>
</div>
<pre class="example">
[ 1, 2, 3 ]
</pre>


<p>
No, in this case, the <code>concat</code> operation leaves the original array unaltered.  This is considered an <i>immutable</i> operation. The new array contains the result.  This is how we would like all of our operations to function:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript">newArray
</pre>
</div>
<pre class="example">
[ 1, 2, 3, 4, 5, 6 ]
</pre>


<p>
I would deffinitely suggest trying more of the array operations, and see which ones of them mutate and which do not.
</p>

<p>
Although these array operations might be annoying in their consistency, the real danger happens when you have nested values in objects, and do not keep track of what is changing.  take the following example:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">plato</span> = <span style="color: #ccc8bc;">{</span>
  name<span style="color: #bbb8ab;">:</span> <span style="color: teal;">"Plato"</span><span style="color: #bbb8ab;">,</span>
  role<span style="color: #bbb8ab;">:</span> <span style="color: teal;">"Philosopher"</span><span style="color: #bbb8ab;">,</span>
  location<span style="color: #bbb8ab;">:</span> <span style="color: #ccc8bc;">{</span> country<span style="color: #bbb8ab;">:</span> <span style="color: teal;">"Greece"</span> <span style="color: #ccc8bc;">}</span>
<span style="color: #ccc8bc;">}</span>

<span style="color: #666;">const</span> <span style="color: #333;">zizek</span> = <span style="color: #ccc8bc;">{</span>
  <span style="color: #bbb8ab;">...</span>plato<span style="color: #bbb8ab;">,</span>
  name<span style="color: #bbb8ab;">:</span> <span style="color: teal;">"Zizek"</span>
<span style="color: #ccc8bc;">}</span>

zizek<span style="color: #bbb8ab;">.</span>location<span style="color: #bbb8ab;">.</span>country = <span style="color: teal;">"Slovenia"</span>

<span style="color: #bbbbbb; font-style: italic;">// </span><span style="color: #bbbbbb; font-style: italic;">now guess wich country plato is in?</span>
plato
</pre>
</div>
<pre class="example">
{
  name: 'Plato',
  role: 'Philosopher',
  location: { country: 'Slovenia' }
}
</pre>


<p>
In this example, <code>plato</code> has magically moved to Slovenia.  Possibly because of the sunlight, but maybe there are some more nefarious reasons.
</p>

<p>
The reason this happens, is because the <code>location</code> property contains a reference to an object, and does not make a copy with the spread operator.  If you were to assign it differently, it would still be an issue.  Although this may seem like a simple to issue, in larger applications with more complicated problem spaces, it becomes quite hard to track what is changing what, and when.
</p>

<p>
In js, even when you <i>think</i> you are not mutating something, you might be somewhere, anyways.  this is why I avoid, at all costs, anything which <i>assigns</i> new values to anything, including object keys.  I try to use  a library for all setting and getting, which guarantees immutability.
</p>

<p>
For example, <code>merge</code> from the library <code>lodash/fp</code> would copy the objects as opposed to referencing them.
</p>
</div>
</div>

<div id="outline-container-org6480da2" class="outline-3">
<h3 id="org6480da2"><span class="section-number-3">1.3</span> Purity</h3>
<div class="outline-text-3" id="text-1-3">
<p>
<i>Purity</i> describes a property of a function.  A function is <i>pure</i> if it <i>has no side effects</i>, and <i>relies on no state of the application</i>  In plain terms, the function cannot change anything about the outside world, or rely on anything from the outside world to change it.  Programmers often refer to the concept of the &ldquo;outside world&rdquo; as <i>scope</i>.
</p>

<p>
A pure function, given the same arguments, will always return the same results.  In functional programming, we try to place as much as our code into pure functions as possible.
</p>

<p>
Take the following example of an <i>impure</i> function:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">person</span> = <span style="color: #ccc8bc;">{</span> first<span style="color: #bbb8ab;">:</span> <span style="color: teal;">"Hannah"</span><span style="color: #bbb8ab;">,</span> last<span style="color: #bbb8ab;">:</span> <span style="color: teal;">"Arendt"</span> <span style="color: #ccc8bc;">}</span><span style="color: #bbb8ab;">;</span>

<span style="color: #666;">const</span> <span style="color: #333;">setFirstName</span> =
  <span style="color: #ccc8bc;">(</span>firstName<span style="color: #bbb8ab;">,</span> obj<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #ccc8bc;">{</span>
    obj<span style="color: #bbb8ab;">.</span>first = firstName<span style="color: #bbb8ab;">;</span>
  <span style="color: #ccc8bc;">}</span>

<span style="color: #111; font-style: italic;">setFirstName</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">"Jennifer"</span><span style="color: #bbb8ab;">,</span> person<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>

person
</pre>
</div>
<pre class="example">
{ first: 'Jennifer', last: 'Arendt' }
</pre>


<p>
This function <i>changes a value outside of it&rsquo;s scope,</i> in this case, the a property of the variable <code>person</code>. It takes a reference to the person and gives this person a new first name. This function has changed a variable outside of the world it understands.
</p>

<p>
This can get pretty confusing when we add in any amount of asyncronous code:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">capitalizePerson</span> = <span style="color: #ccc8bc;">()</span> =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #ccc8bc;">{</span>
  person<span style="color: #bbb8ab;">.</span>first = person<span style="color: #bbb8ab;">.</span>first<span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">toUpperCase</span><span style="color: #ccc8bc;">()</span><span style="color: #bbb8ab;">;</span>
  person<span style="color: #bbb8ab;">.</span>last = person<span style="color: #bbb8ab;">.</span>last<span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">toUpperCase</span><span style="color: #ccc8bc;">()</span><span style="color: #bbb8ab;">;</span>
<span style="color: #ccc8bc;">}</span>

<span style="color: #bbbbbb; font-style: italic;">// </span><span style="color: #bbbbbb; font-style: italic;">a very short helper function for clarity.  Feel free to ignore.</span>
<span style="color: #666;">const</span> <span style="color: #333;">delay</span> = <span style="color: #ccc8bc;">(</span>ms<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span>
  <span style="color: #666;">new</span> <span style="color: #111; font-style: italic;">Promise</span><span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">(</span>resolve<span style="color: #bbb8ab;">,</span> reject<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #111; font-style: italic;">setTimeout</span><span style="color: #ccc8bc;">(</span>resolve<span style="color: #bbb8ab;">,</span> ms<span style="color: #ccc8bc;">)</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>

<span style="color: #666;">const</span> <span style="color: #333;">functions</span> = <span style="color: #ccc8bc;">[</span>
    <span style="color: #111; font-style: italic;">delay</span><span style="color: #ccc8bc;">(</span><span style="color: #db7093;">500</span><span style="color: #ccc8bc;">)</span>
      <span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">then</span><span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">()</span> =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #111; font-style: italic;">setFirstName</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">"regina"</span><span style="color: #bbb8ab;">,</span> person<span style="color: #ccc8bc;">)</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">,</span>
    <span style="color: #111; font-style: italic;">delay</span><span style="color: #ccc8bc;">(</span><span style="color: #db7093;">200</span><span style="color: #ccc8bc;">)</span>
      <span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">then</span><span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">()</span> =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #111; font-style: italic;">setFirstName</span><span style="color: #ccc8bc;">(</span><span style="color: #666;">null</span><span style="color: #bbb8ab;">,</span> person<span style="color: #ccc8bc;">)</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">,</span>
    <span style="color: #111; font-style: italic;">delay</span><span style="color: #ccc8bc;">(</span>Math<span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">random</span><span style="color: #ccc8bc;">()</span> * <span style="color: #db7093;">400</span><span style="color: #ccc8bc;">)</span>
      <span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">then</span><span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">()</span> =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #111; font-style: italic;">capitalizePerson</span><span style="color: #ccc8bc;">()</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">,</span>
<span style="color: #ccc8bc;">]</span>

<span style="color: #666;">const</span> <span style="color: #333;">results</span> = <span style="color: #666;">await</span> Promise<span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">all</span><span style="color: #ccc8bc;">(</span>functions<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>

person
</pre>
</div>
<pre class="example">
{ first: 'regina', last: 'ARENDT' }
</pre>


<p>
This snippet of code has wildly different outputs depending on:
</p>
<ul class="org-ul">
<li>how many times it was run</li>
<li>the side effect of <code>Math.random</code></li>
</ul>

<p>
In some cases, we get a result.  In other cases, we have an error.  In all cases, we rely on the <i>current state</i> of the <code>person</code> variable.
</p>

<p>
Both the functions <code>capitalizePerson</code> and <code>setFirstName</code> are <i>impure</i> functions, because they either rely on the existence of external values <i>or</i> change values outside of their scope.
</p>

<p>
Impure functions should be avoided in functional programming because:
</p>
<ul class="org-ul">
<li>They are hard to reason about
<ul class="org-ul">
<li>it is hard to keep track of the state of the application</li>
<li>the function relies on the state of the application</li>
<li>because of this, you can&rsquo;t simply read the code to figure out what it is doing.  It is relying on the current application state.</li>
</ul></li>
<li>It becomes <i>much</i> harder to write tests fot the functions.</li>
</ul>

<p>
We can rewrite <code>setFirstName</code> and <code>capitalizePerson</code> as <i>pure</i> functions:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">person</span> = <span style="color: #ccc8bc;">{</span> first<span style="color: #bbb8ab;">:</span> <span style="color: teal;">"Hannah"</span><span style="color: #bbb8ab;">,</span> last<span style="color: #bbb8ab;">:</span> <span style="color: teal;">"Arendt"</span> <span style="color: #ccc8bc;">}</span><span style="color: #bbb8ab;">;</span>

<span style="color: #666;">const</span> <span style="color: #333;">setFirstName</span> =
  <span style="color: #ccc8bc;">(</span>first<span style="color: #bbb8ab;">:</span> <span style="color: #bbb8ab;">string</span><span style="color: #bbb8ab;">,</span> p<span style="color: #bbb8ab;">:</span> <span style="color: #bbb8ab;">Person</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">:</span> <span style="color: #bbb8ab;">Person</span> =<span style="color: #bbb8ab;">&gt;</span>
    <span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">{</span> <span style="color: #bbb8ab;">...</span>p<span style="color: #bbb8ab;">,</span> first <span style="color: #ccc8bc;">}</span><span style="color: #ccc8bc;">)</span>

<span style="color: #666;">const</span> <span style="color: #333;">capitalizePerson</span> = <span style="color: #ccc8bc;">(</span>p<span style="color: #bbb8ab;">:</span> <span style="color: #bbb8ab;">Person</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">:</span> <span style="color: #bbb8ab;">Person</span> =<span style="color: #bbb8ab;">&gt;</span>
  <span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">{</span>
    first<span style="color: #bbb8ab;">:</span> p<span style="color: #bbb8ab;">.</span>first<span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">toUpperCase</span><span style="color: #ccc8bc;">()</span><span style="color: #bbb8ab;">,</span>
    last<span style="color: #bbb8ab;">:</span> p<span style="color: #bbb8ab;">.</span>last<span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">toUpperCase</span><span style="color: #ccc8bc;">()</span><span style="color: #bbb8ab;">,</span>
  <span style="color: #ccc8bc;">}</span><span style="color: #ccc8bc;">)</span>

<span style="color: #bbbbbb; font-style: italic;">// </span><span style="color: #bbbbbb; font-style: italic;">none of these functions change person</span>
<span style="color: #666;">await</span> Promise<span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">all</span><span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">[</span>
  <span style="color: #111; font-style: italic;">delay</span><span style="color: #ccc8bc;">(</span><span style="color: #db7093;">300</span><span style="color: #ccc8bc;">)</span>
    <span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">then</span><span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">()</span> =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #111; font-style: italic;">setFirstName</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">"Jennifer"</span><span style="color: #bbb8ab;">,</span> person<span style="color: #ccc8bc;">)</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">,</span>
  <span style="color: #111; font-style: italic;">delay</span><span style="color: #ccc8bc;">(</span><span style="color: #db7093;">400</span><span style="color: #ccc8bc;">)</span>
    <span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">then</span><span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">()</span> =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #111; font-style: italic;">capitalizePerson</span><span style="color: #ccc8bc;">(</span>person<span style="color: #ccc8bc;">)</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">,</span>
  <span style="color: #111; font-style: italic;">delay</span><span style="color: #ccc8bc;">(</span><span style="color: #db7093;">500</span><span style="color: #ccc8bc;">)</span>
    <span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">then</span><span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">()</span> =<span style="color: #bbb8ab;">&gt;</span> person<span style="color: #ccc8bc;">)</span>
  <span style="color: #ccc8bc;">]</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>
<pre class="example">
[
  { first: 'Jennifer', last: 'Arendt' },
  { first: 'HANNAH', last: 'ARENDT' },
  { first: 'Hannah', last: 'Arendt' }
]
</pre>


<p>
Although this might be an oversimplified example, I hope that you can already see how this concept can be helpful.  Each of the promises return <i>replicatable</i> results, that do not really rely on the current state of <code>person</code>.  <code>person</code> remains unchaged afer the <code>setFirstName</code> and <code>capitalizePerson</code> functions.
</p>

<p>
As many functions as possible should be kept small, testable, and pure.  If a function does need to have have side effects, it makes sense to keep the side effects separate, in a wrapping function, as an example:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">let</span> <span style="color: #333;">statePerson</span> = <span style="color: #ccc8bc;">{</span> first<span style="color: #bbb8ab;">:</span> <span style="color: teal;">"Britney"</span><span style="color: #bbb8ab;">,</span> last<span style="color: #bbb8ab;">:</span> <span style="color: teal;">"Spears"</span> <span style="color: #ccc8bc;">}</span>
<span style="color: #666;">let</span> <span style="color: #333;">inputName</span> = <span style="color: teal;">"Jemima"</span><span style="color: #bbb8ab;">;</span>

<span style="color: #666;">const</span> <span style="color: #333;">updateStateName</span> = <span style="color: #ccc8bc;">()</span> =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #ccc8bc;">{</span>
  <span style="color: #666;">const</span> <span style="color: #333;">updatedPerson</span> = <span style="color: #111; font-style: italic;">setFirstName</span><span style="color: #ccc8bc;">(</span>inputName<span style="color: #bbb8ab;">,</span> statePerson<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
  statePerson = updatedPerson<span style="color: #bbb8ab;">;</span>
<span style="color: #ccc8bc;">}</span>

<span style="color: #111; font-style: italic;">updateStateName</span><span style="color: #ccc8bc;">()</span><span style="color: #bbb8ab;">;</span>

statePerson<span style="color: #bbb8ab;">;</span>
</pre>
</div>
<pre class="example">
{ first: 'Jemima', last: 'Spears' }
</pre>


<p>
This function <code>updateStateName</code> deals with the state, while <code>setFirstName</code> deals with the operation.  At least in this case, we can test the operations separately from the state management.
</p>
</div>
</div>

<div id="outline-container-org6d340f4" class="outline-3">
<h3 id="org6d340f4"><span class="section-number-3">1.4</span> Encapsulation</h3>
<div class="outline-text-3" id="text-1-4">
<p>
It is naturally <i>impossible</i> for an application to be completely pure.  The whole point of computer programs is to <i>have</i> side effects.  Add a user to the database, update the names, give a horoscope depending on the position of the stars, time, and life, changes.  I also like to think of <i>encapsulation</i> as a form of <i>layering</i>.
</p>

<p>
Any part of the application that deals with side effects should have those side effects be encapsulated in a separate <i>layer</i> of the application, that lives separately from the <i>pure</i> part of the application. This reduces the amount of places that you have to deal with unknowns.  I like to think of this type of application design as an onion.  The outside layers have to interface tith the world and therefore get hard and crunchy.  The inside stays pure, moist, and makes us cry.
</p>

<p>
In an average application, it might look like this, with the inside and outside layers representing our side effects.
</p>

<div class="org-src-container">
<pre class="src src-bash">-<span style="color: #bbb8ab;">&gt;</span> User Interface <span style="color: #ccc8bc;">(</span>side effects<span style="color: #ccc8bc;">)</span> <span style="color: #ccc8bc;">(</span>impure<span style="color: #ccc8bc;">)</span>
-<span style="color: #bbb8ab;">&gt;</span> validation <span style="color: #ccc8bc;">(</span>pure<span style="color: #ccc8bc;">)</span>
-<span style="color: #bbb8ab;">&gt;</span> state layer <span style="color: #ccc8bc;">(</span>pure<span style="color: #ccc8bc;">)</span>
-<span style="color: #bbb8ab;">&gt;</span> business logic <span style="color: #ccc8bc;">(</span>pure<span style="color: #ccc8bc;">)</span>
-<span style="color: #bbb8ab;">&gt;</span> api layer <span style="color: #ccc8bc;">(</span>pure<span style="color: #ccc8bc;">)</span>
-<span style="color: #bbb8ab;">&gt;</span> validation <span style="color: #ccc8bc;">(</span>pure<span style="color: #ccc8bc;">)</span>
-<span style="color: #bbb8ab;">&gt;</span> Database <span style="color: #ccc8bc;">(</span>side effects<span style="color: #ccc8bc;">)</span> <span style="color: #ccc8bc;">(</span>impure<span style="color: #ccc8bc;">)</span>
</pre>
</div>

<p>
This means - the pure black box of the application will <i>always</i> act the same given that the database and the user interface are in the same state.  Pure functions and Pure layers can be <span class="underline">combined</span> into pure applications.
</p>

<p>
Encapsulation has another, perhaps hidden, advantage:
</p>

<p>
You are able to change the database system you are using by only changing one layer of the application.  If you wanted to use a different type of database or a different frontend, you would only have to rewrite one layer of the application.
</p>
</div>
</div>


<div id="outline-container-org6f06c95" class="outline-3">
<h3 id="org6f06c95"><span class="section-number-3">1.5</span> Higher order functions</h3>
<div class="outline-text-3" id="text-1-5">
<p>
Put simply, higher order functions either
</p>
<ul class="org-ul">
<li>take a function as an argument, or,</li>
<li>return a function</li>
</ul>

<p>
The classic, and possibly simplest, example looks like this:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">makeGreeter</span> =
  <span style="color: #ccc8bc;">(</span>greeting<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span>
    <span style="color: #ccc8bc;">(</span>person<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span>
       <span style="color: teal;">`${greeting} ${person.first}`</span><span style="color: #bbb8ab;">;</span>

<span style="color: #666;">const</span> <span style="color: #333;">sayHello</span> = <span style="color: #111; font-style: italic;">makeGreeter</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`hello dearest`</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>

<span style="color: #111; font-style: italic;">sayHello</span><span style="color: #ccc8bc;">(</span>person<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>
<pre class="example">
hello dearest Hannah
</pre>


<p>
<code>makeGreeter</code> is a function, that takes a greeting, and returns another function, that is waiting for a person to greet.
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">sayGoodbye</span> = <span style="color: #111; font-style: italic;">makeGreeter</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`ciao cacao`</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>

<span style="color: #111; font-style: italic;">sayGoodbye</span><span style="color: #ccc8bc;">(</span>person<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>
<pre class="example">
ciao cacao Hannah
</pre>


<p>
(this sort of function is also called a <i>closure</i>)
</p>

<p>
You already know a few higher order functions from javascript, speciffically <code>Array.map</code> and <code>Array.forEach</code> as they take functions for arguments.
</p>

<p>
If we take the case of <code>map</code>, it takes a function, and array, and returns the function applied to each element of the array. For example:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #ccc8bc;">[</span><span style="color: #db7093;">1</span><span style="color: #bbb8ab;">,</span> <span style="color: #db7093;">2</span><span style="color: #bbb8ab;">,</span> <span style="color: #db7093;">3</span><span style="color: #ccc8bc;">]</span><span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">map</span><span style="color: #ccc8bc;">(</span>x =<span style="color: #bbb8ab;">&gt;</span> x + <span style="color: #db7093;">1</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>

</pre>
</div>
<pre class="example">
[ 2, 3, 4 ]
</pre>


<p>
<code>map</code> could also be implemented like this, using the kind of programming i would have learned in university:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">map</span> =
  <span style="color: #ccc8bc;">(</span>fn<span style="color: #bbb8ab;">,</span> arr<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #ccc8bc;">{</span>
    <span style="color: #666;">const</span> <span style="color: #333;">newArr</span> = <span style="color: #ccc8bc;">[]</span><span style="color: #bbb8ab;">;</span>
    <span style="color: #111; font-style: italic;">for</span> <span style="color: #ccc8bc;">(</span><span style="color: #666;">let</span> <span style="color: #333;">i</span> = <span style="color: #db7093;">0</span><span style="color: #bbb8ab;">;</span> i <span style="color: #bbb8ab;">&lt;</span> <span style="color: #bbb8ab;">arr.length;</span> <span style="color: #bbb8ab;">i</span>++<span style="color: #ccc8bc;">)</span> <span style="color: #ccc8bc;">{</span>
      <span style="color: #666;">const</span> <span style="color: #333;">current</span> = arr<span style="color: #ccc8bc;">[</span>i<span style="color: #ccc8bc;">]</span><span style="color: #bbb8ab;">;</span>
      <span style="color: #666;">const</span> <span style="color: #333;">result</span> = <span style="color: #111; font-style: italic;">fn</span><span style="color: #ccc8bc;">(</span>current<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
      newArr<span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">push</span><span style="color: #ccc8bc;">(</span>result<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
    <span style="color: #ccc8bc;">}</span>
    <span style="color: #db7093;">return</span> newArr<span style="color: #bbb8ab;">;</span>
  <span style="color: #ccc8bc;">}</span>

<span style="color: #111; font-style: italic;">map</span><span style="color: #ccc8bc;">(</span>x =<span style="color: #bbb8ab;">&gt;</span> x + <span style="color: #db7093;">1</span><span style="color: #bbb8ab;">,</span> <span style="color: #ccc8bc;">[</span><span style="color: #db7093;">1</span><span style="color: #bbb8ab;">,</span> <span style="color: #db7093;">2</span><span style="color: #bbb8ab;">,</span> <span style="color: #db7093;">3</span><span style="color: #ccc8bc;">]</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>
<pre class="example">
[ 2, 3, 4 ]
</pre>


<p>
Notice how in this example, we take the function first, and the array second.  This is a common pattern in functional programming, where we define first the <i>operation</i>, and then the <i>thing we operate on</i>.
</p>
</div>
</div>

<div id="outline-container-org63df0cc" class="outline-3">
<h3 id="org63df0cc"><span class="section-number-3">1.6</span> Function composition</h3>
<div class="outline-text-3" id="text-1-6">
<p>
<i>Function composition</i> involves turning two or more functions into one <i>operation</i>, or another function.  It allows us to <i>chain</i> or <i>pipe</i> operations together in a very legible way.  For function composition to work, though, we should first look into partial application.
</p>
</div>

<div id="outline-container-org65ce0d5" class="outline-4">
<h4 id="org65ce0d5"><span class="section-number-4">1.6.1</span> Partials</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
<i>Partial application</i> involves using a higher order function, which takes a function and an argument, to return a version of that function with the given argument already supplied.  I like to think of functions as always &rsquo;waiting&rsquo; for arguments.  Partials allow us to give the function one of the arguments it is awaiting, while it still stays a function, waiting for arguments.
</p>

<p>
This does not come built in to javascript, so we will use an external library <code>lodash</code> to do it.   Other, similar libraries exist, like rambda, underscore, but lodash should work just fine for us.  note that we use the <code>fp</code> version of <code>lodash</code> throughout this article, as it is auto-curried and makes function composition easier (more on this later.)
</p>

<p>
Let&rsquo;s revisit our greeter function from above.
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">makeGreeter</span> =
  <span style="color: #ccc8bc;">(</span>greeting<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span>
    <span style="color: #ccc8bc;">(</span>person<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span>
      <span style="color: teal;">`${greeting} ${person.first}`</span>
</pre>
</div>
<p>
This works as a function creator, because it has a function nested inside of another function.
</p>

<p>
Most of the time, we don&rsquo;t receive functions from other libraries or programmers this way, but sometimes we need it.  Most functions are called like this <code>fn(a, b)</code>, but sometimes, we might want this: <code>fn(a)(b)</code>
</p>

<p>
This is where <i>partial application</i> comes in useful.
</p>

<p>
Assume our greeting function was written like this, instead, but we still wanted to make some greeter functions pre-filled with our greeting.
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">greetPerson</span> =
  <span style="color: #ccc8bc;">(</span>greeting<span style="color: #bbb8ab;">,</span> person<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">:</span> <span style="color: #bbb8ab;">string</span> =<span style="color: #bbb8ab;">&gt;</span>
    <span style="color: teal;">`${greeting} ${person.first}`</span>
</pre>
</div>
<p>
We could still create a <i>specific greeter</i> by using <i>partial</i>.
</p>

<p>
First, import <code>partial</code> from <code>lodash/fp</code>:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">import</span> <span style="color: #ccc8bc;">{</span> partial <span style="color: #ccc8bc;">}</span> <span style="color: #666;">from</span> <span style="color: teal;">"lodash/fp"</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>

<p>
Then, apply our greeting &ldquo;hi&rdquo; to our function from before:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">sayHi</span> = <span style="color: #111; font-style: italic;">partial</span><span style="color: #ccc8bc;">(</span>greetPerson<span style="color: #bbb8ab;">,</span> <span style="color: #ccc8bc;">[</span><span style="color: teal;">`hi`</span><span style="color: #ccc8bc;">]</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>

<span style="color: #111; font-style: italic;">sayHi</span><span style="color: #ccc8bc;">(</span>person<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>
<pre class="example">
hi Hannah
</pre>


<p>
The function <code>sayHi</code> is a function <i>waiting</i> for the rest of it&rsquo;s arguments.
</p>

<p>
We could also give our funtion <i>all</i> of the arguments it is waiting for.  The function returned is then simply waiting to be called.
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">dollyParton</span> = <span style="color: #ccc8bc;">{</span> first<span style="color: #bbb8ab;">:</span> <span style="color: teal;">`dolly`</span><span style="color: #bbb8ab;">,</span> last<span style="color: #bbb8ab;">:</span> <span style="color: teal;">`parton`</span> <span style="color: #ccc8bc;">}</span>

<span style="color: #666;">const</span> <span style="color: #333;">sayYeehawToDolly</span> = <span style="color: #111; font-style: italic;">partial</span><span style="color: #ccc8bc;">(</span>greetPerson<span style="color: #bbb8ab;">,</span> <span style="color: #ccc8bc;">[</span><span style="color: teal;">`yeehaw, says`</span><span style="color: #bbb8ab;">,</span> dollyParton<span style="color: #ccc8bc;">]</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>

<span style="color: #111; font-style: italic;">sayYeehawToDolly</span><span style="color: #ccc8bc;">()</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>
<pre class="example">
yeehaw, says dolly
</pre>
</div>
</div>

<div id="outline-container-orgb108842" class="outline-4">
<h4 id="orgb108842"><span class="section-number-4">1.6.2</span> Currying</h4>
<div class="outline-text-4" id="text-1-6-2">
<p>
When a function <i>partial</i>&rsquo;s itself, it is called <i>currying</i>.
</p>

<p>
currying a function allows that function to be called like this:
<code>f(1, 2, 3)</code>, or this:
<code>f(1)(2)(3)</code>, or this:
<code>f(1)(2, 3)</code>, and always return the same result.
</p>

<p>
To play with this, we will import the function <code>curry</code> from lodash:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">import</span> <span style="color: #ccc8bc;">{</span> curry <span style="color: #ccc8bc;">}</span> <span style="color: #666;">from</span> <span style="color: teal;">"lodash/fp"</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>
<p>
Use this function as an example:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">createPerson</span> =
  <span style="color: #ccc8bc;">(</span>occupation<span style="color: #bbb8ab;">,</span> first<span style="color: #bbb8ab;">,</span> last<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span>
    <span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">{</span> first<span style="color: #bbb8ab;">,</span> last<span style="color: #bbb8ab;">,</span> occupation <span style="color: #ccc8bc;">}</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>

<span style="color: #111; font-style: italic;">createPerson</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`police`</span><span style="color: #bbb8ab;">,</span> <span style="color: teal;">`silly`</span><span style="color: #bbb8ab;">,</span> <span style="color: teal;">`goose`</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>
<pre class="example">
{ first: 'silly', last: 'goose', occupation: 'police' }
</pre>


<p>
This function simply takes an occupation, a first name, and a last name, and creates a <code>Person</code> out of it.
</p>

<p>
if we wanted to create a specialized function called <code>createPolice</code>, that creates policemen faster than democratic funding, we could do it with partial application as in the previous section. <i>Or</i> we could curry the <code>createPerson</code> function to do this more efficiently. Note, this is the exact same function as before, but &rsquo;wrapped&rsquo; in the <code>curry</code> function.
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">createPerson</span> =
  <span style="color: #111; font-style: italic;">curry</span><span style="color: #ccc8bc;">(</span>
    <span style="color: #ccc8bc;">(</span>occupation<span style="color: #bbb8ab;">,</span> first<span style="color: #bbb8ab;">,</span> last<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span>
      <span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">{</span> first<span style="color: #bbb8ab;">,</span> last<span style="color: #bbb8ab;">,</span> occupation <span style="color: #ccc8bc;">}</span><span style="color: #ccc8bc;">)</span>
  <span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>
<p>
this will now allow us to call <code>createPerson</code> with only partial arguments, which <i>returns a new function waiting for the rest</i>
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">createPolice</span> = <span style="color: #111; font-style: italic;">createPerson</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`police`</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>

<span style="color: #111; font-style: italic;">createPolice</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`arnold`</span><span style="color: #ccc8bc;">)(</span><span style="color: teal;">`schwarzenegger`</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>
<pre class="example">
{ first: 'arnold', last: 'schwarzenegger', occupation: 'police' }
</pre>


<p>
these examples might not seem particularly useful now, but they lend themselves extremely well to the next topic:
</p>
</div>
</div>

<div id="outline-container-org0f2a7b1" class="outline-4">
<h4 id="org0f2a7b1"><span class="section-number-4">1.6.3</span> composition</h4>
<div class="outline-text-4" id="text-1-6-3">
<p>
<i>Function composition</i> allows us to chain functions together, where the output of one function becomes the input of the next.
</p>

<p>
Imagine that you are working on an application. Your application takes (as input) a user, and changes this user as they are theoretically hired by the company of their dreams.
</p>

<p>
In human language, what our application should do is:
</p>

<ol class="org-ol">
<li>greet the user.</li>
<li>fix the capitalization of the user, in case it was inputted wrong. then,</li>
<li>we should hire them at our tech company by setting their occupation to &ldquo;programmer&rdquo;.  then,</li>
<li>they get married, which should change their last name and update their relationship status.
apparently this just naturally happens when you join this company. Lastly,</li>
<li>we should say goodbye.</li>
</ol>

<p>
In an imperative programming style, we might do something like this:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">person</span> = <span style="color: #ccc8bc;">{</span>
  first<span style="color: #bbb8ab;">:</span> <span style="color: teal;">`bonnie`</span><span style="color: #bbb8ab;">,</span>
  last<span style="color: #bbb8ab;">:</span> <span style="color: teal;">`billy`</span><span style="color: #bbb8ab;">,</span>
  occupation<span style="color: #bbb8ab;">:</span> <span style="color: teal;">`unemployed`</span><span style="color: #bbb8ab;">,</span>
  relationship<span style="color: #bbb8ab;">:</span> <span style="color: teal;">`single`</span><span style="color: #bbb8ab;">,</span>
<span style="color: #ccc8bc;">}</span><span style="color: #bbb8ab;">;</span>

<span style="color: #bbb8ab;">console.</span><span style="color: #111; font-style: italic;">log</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`hi there! ${person.first}`</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>

person<span style="color: #bbb8ab;">.</span>first = person<span style="color: #bbb8ab;">.</span>first<span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">toUpperCase</span><span style="color: #ccc8bc;">()</span><span style="color: #bbb8ab;">;</span>

person<span style="color: #bbb8ab;">.</span>occupation = <span style="color: teal;">`programmer`</span><span style="color: #bbb8ab;">;</span>

person<span style="color: #bbb8ab;">.</span>last = <span style="color: teal;">`Jones`</span><span style="color: #bbb8ab;">;</span>

person<span style="color: #bbb8ab;">.</span>relationship = <span style="color: teal;">`hitched`</span><span style="color: #bbb8ab;">;</span>

<span style="color: #bbb8ab;">console.</span><span style="color: #111; font-style: italic;">log</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`goodbye ${person.first}`</span><span style="color: #ccc8bc;">)</span>

person
</pre>
</div>

<pre class="example">
hi there! bonnie
goodbye BONNIE
{
  first: 'BONNIE',
  last: 'Jones',
  occupation: 'programmer',
  relationship: 'hitched'
}
</pre>


<p>
While this code is quite legible, it suffers because none of it is refactored into smaller pieces.  If you had a similar function, with just one thing different, you would struggle to keep the different types of operations up to date.
</p>

<p>
Imagine that you changed the type, and how the first name was updated, or the type of capitalization you wanted in your data.  If you were programming everywhere imperitavely like this, you would have a lot of places to try to find the changes.
</p>

<p>
Additionally, if an external process would (theoretically) mutate <code>person</code> during the operation of this function, you would be in trouble.
</p>

<p>
for these reasons, we separate the core functionality into smaller sized helper functions, that are pure, reusable, and closer to the data type.  Therefore we rewrite each operation into its own reusable, testable, function.  Notice now, already, that each function takes a person as the <span class="underline">second</span> argument, and returns a person.
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #bbbbbb; font-style: italic;">// </span><span style="color: #bbbbbb; font-style: italic;">p represents a person</span>

<span style="color: #666;">const</span> <span style="color: #333;">setFirstName</span> = <span style="color: #ccc8bc;">(</span>first<span style="color: #bbb8ab;">,</span> p<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">{</span> <span style="color: #bbb8ab;">...</span>p<span style="color: #bbb8ab;">,</span> first <span style="color: #ccc8bc;">}</span><span style="color: #ccc8bc;">)</span>

<span style="color: #666;">const</span> <span style="color: #333;">setLastName</span> = <span style="color: #ccc8bc;">(</span>last<span style="color: #bbb8ab;">,</span> p<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">{</span> <span style="color: #bbb8ab;">...</span>p<span style="color: #bbb8ab;">,</span> last <span style="color: #ccc8bc;">}</span><span style="color: #ccc8bc;">)</span>

<span style="color: #666;">const</span> <span style="color: #333;">setOccupation</span> = <span style="color: #ccc8bc;">(</span>occupation<span style="color: #bbb8ab;">,</span> p<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">{</span> <span style="color: #bbb8ab;">...</span>p<span style="color: #bbb8ab;">,</span> occupation <span style="color: #ccc8bc;">}</span><span style="color: #ccc8bc;">)</span>

<span style="color: #666;">const</span> <span style="color: #333;">fixCapitalization</span> = <span style="color: #ccc8bc;">(</span>p<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span>
  <span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">{</span> <span style="color: #bbb8ab;">...</span>p<span style="color: #bbb8ab;">,</span> first<span style="color: #bbb8ab;">:</span> p<span style="color: #bbb8ab;">.</span>first<span style="color: #bbb8ab;">.</span><span style="color: #111; font-style: italic;">toUpperCase</span><span style="color: #ccc8bc;">()</span> <span style="color: #ccc8bc;">}</span><span style="color: #ccc8bc;">)</span>

<span style="color: #666;">const</span> <span style="color: #333;">greetPerson</span> = <span style="color: #ccc8bc;">(</span>greeting<span style="color: #bbb8ab;">,</span> p<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #ccc8bc;">{</span>
  <span style="color: #bbb8ab;">console.</span><span style="color: #111; font-style: italic;">log</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`${greeting} ${p.first} ${p.last}`</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
  <span style="color: #db7093;">return</span> p<span style="color: #bbb8ab;">;</span>
<span style="color: #ccc8bc;">}</span>

<span style="color: #666;">const</span> <span style="color: #333;">setRelationshipStatus</span> = <span style="color: #ccc8bc;">(</span>r<span style="color: #bbb8ab;">,</span> p<span style="color: #ccc8bc;">)</span> =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #ccc8bc;">(</span><span style="color: #ccc8bc;">{</span> <span style="color: #bbb8ab;">...</span>p<span style="color: #bbb8ab;">,</span> relationship<span style="color: #bbb8ab;">:</span> r <span style="color: #ccc8bc;">}</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>
<p>
We could now rewrite our code from earlier like this:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">person</span> = <span style="color: #ccc8bc;">{</span>
  first<span style="color: #bbb8ab;">:</span> <span style="color: teal;">`bonnie`</span><span style="color: #bbb8ab;">,</span>
  last<span style="color: #bbb8ab;">:</span> <span style="color: teal;">`billy`</span><span style="color: #bbb8ab;">,</span>
  occupation<span style="color: #bbb8ab;">:</span> <span style="color: teal;">`unemployed`</span><span style="color: #bbb8ab;">,</span>
  relationship<span style="color: #bbb8ab;">:</span> <span style="color: teal;">`single`</span><span style="color: #bbb8ab;">,</span>
<span style="color: #ccc8bc;">}</span><span style="color: #bbb8ab;">;</span>

<span style="color: #111; font-style: italic;">greetPerson</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`hi there!`</span><span style="color: #bbb8ab;">,</span> person<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>

<span style="color: #666;">const</span> <span style="color: #333;">updatedPerson</span> = <span style="color: #111; font-style: italic;">fixCapitalization</span><span style="color: #ccc8bc;">(</span>person<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>

<span style="color: #666;">const</span> <span style="color: #333;">occupiedPerson</span> = <span style="color: #111; font-style: italic;">setOccupation</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`programmer`</span><span style="color: #bbb8ab;">,</span> updatedPerson<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>

<span style="color: #666;">const</span> <span style="color: #333;">marriedPerson</span> = <span style="color: #111; font-style: italic;">setLastName</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`Jones`</span><span style="color: #bbb8ab;">,</span> occupiedPerson<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>

<span style="color: #666;">const</span> <span style="color: #333;">marriedUpdatedPerson</span> = <span style="color: #111; font-style: italic;">setRelationshipStatus</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`hitched`</span><span style="color: #bbb8ab;">,</span> marriedPerson<span style="color: #ccc8bc;">)</span>

<span style="color: #111; font-style: italic;">greetPerson</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`goodbye`</span><span style="color: #bbb8ab;">,</span> marriedUpdatedPerson<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>

<pre class="example">
hi there! bonnie billy
goodbye BONNIE Jones
{
  first: 'BONNIE',
  last: 'Jones',
  occupation: 'programmer',
  relationship: 'hitched'
}
</pre>


<p>
I don&rsquo;t know about you, but I find this code very very hard to read, and there are a lot of one-time-use variables in it.  Whenever we find ourselves making a variable simply to pass it on, we should <i>compose</i> our functions together.
</p>

<p>
A naive version of function composition would be to nest the functions.  we could try to use the output of one function as the input of the next like this:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #111; font-style: italic;">greetPerson</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`goodbye`</span><span style="color: #bbb8ab;">,</span> <span style="color: #111; font-style: italic;">setRelationshipStatus</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`hitched`</span><span style="color: #bbb8ab;">,</span> <span style="color: #111; font-style: italic;">setLastName</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`Jones`</span><span style="color: #bbb8ab;">,</span> <span style="color: #111; font-style: italic;">setOccupation</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`programmer`</span><span style="color: #bbb8ab;">,</span> <span style="color: #111; font-style: italic;">fixCapitalization</span><span style="color: #ccc8bc;">(</span><span style="color: #111; font-style: italic;">greetPerson</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`hi there!`</span><span style="color: #bbb8ab;">,</span> person<span style="color: #ccc8bc;">)</span><span style="color: #ccc8bc;">)</span><span style="color: #ccc8bc;">)</span><span style="color: #ccc8bc;">)</span><span style="color: #ccc8bc;">)</span><span style="color: #ccc8bc;">)</span>
</pre>
</div>
<pre class="example">
hi there! bonnie billy
goodbye BONNIE Jones
{
  first: 'BONNIE',
  last: 'Jones',
  occupation: 'programmer',
  relationship: 'hitched'
}
</pre>


<p>
this, I find even less legible.  We could try this:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #111; font-style: italic;">greetPerson</span><span style="color: #ccc8bc;">(</span>
  <span style="color: teal;">`goodbye`</span><span style="color: #bbb8ab;">,</span>
  <span style="color: #111; font-style: italic;">setRelationshipStatus</span><span style="color: #ccc8bc;">(</span>
    <span style="color: teal;">`hitched`</span><span style="color: #bbb8ab;">,</span>
    <span style="color: #111; font-style: italic;">setLastName</span><span style="color: #ccc8bc;">(</span>
      <span style="color: teal;">`Jones`</span><span style="color: #bbb8ab;">,</span>
      <span style="color: #111; font-style: italic;">setOccupation</span><span style="color: #ccc8bc;">(</span>
        <span style="color: teal;">`programmer`</span><span style="color: #bbb8ab;">,</span>
        <span style="color: #111; font-style: italic;">fixCapitalization</span><span style="color: #ccc8bc;">(</span>
          <span style="color: #111; font-style: italic;">greetPerson</span><span style="color: #ccc8bc;">(</span>
            <span style="color: teal;">`hi there!`</span><span style="color: #bbb8ab;">,</span>
            person<span style="color: #ccc8bc;">)</span><span style="color: #ccc8bc;">)</span><span style="color: #ccc8bc;">)</span><span style="color: #ccc8bc;">)</span><span style="color: #ccc8bc;">)</span><span style="color: #ccc8bc;">)</span> <span style="color: #bbbbbb; font-style: italic;">// </span><span style="color: #bbbbbb; font-style: italic;">i am leaving these parenthese here lol</span>
</pre>
</div>

<pre class="example">
hi there! bonnie billy
goodbye BONNIE Jones
{
  first: 'BONNIE',
  last: 'Jones',
  occupation: 'programmer',
  relationship: 'hitched'
}
</pre>


<p>
This is almost better, but we still have to read our code backwards.  We start with the <code>person</code> at the bottom, and thread this person through our changes.
</p>

<p>
A chain or a pipe type of function composition allows us to change the pattern
<code>f(g(n(x)))</code> into
<code>(n | g | f)(x)</code>, or, technically
<code>(n, g, f)(x)</code>
</p>

<p>
Function composition takes the output of one function and &rsquo;pipes&rsquo; it into the next.  This is similar to the <code>|</code> operator in the unix shell, and is used extensively in function composition.
</p>

<p>
This sort of function composition is also not native to javascript.  It is found by default in functional languages such as haskell or clojure. in javascript, we can use a lodash function for it called <code>pipe</code>
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">import</span> <span style="color: #ccc8bc;">{</span> pipe <span style="color: #ccc8bc;">}</span> <span style="color: #666;">from</span> <span style="color: teal;">"lodash/fp"</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>
<p>
<code>pipe</code> will allow us to construct and name a function based off of a thread of functions.  We will call this meta function <code>onBoard</code>, as the combination of all of the other functions result in the <code>onBoard</code> operation.  We can now rewrite our code like this:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript">
<span style="color: #666;">const</span> <span style="color: #333;">onBoard</span> =
  <span style="color: #111; font-style: italic;">pipe</span><span style="color: #ccc8bc;">(</span>
    p =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #111; font-style: italic;">greetPerson</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`hello`</span><span style="color: #bbb8ab;">,</span> p<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">,</span>
    p =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #111; font-style: italic;">fixCapitalization</span><span style="color: #ccc8bc;">(</span>p<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">,</span>
    p =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #111; font-style: italic;">setOccupation</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`programmer`</span><span style="color: #bbb8ab;">,</span> p<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">,</span>
    p =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #111; font-style: italic;">setLastName</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`Jones`</span><span style="color: #bbb8ab;">,</span> p<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">,</span>
    p =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #111; font-style: italic;">setRelationshipStatus</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`hitched`</span><span style="color: #bbb8ab;">,</span> p<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">,</span>
    p =<span style="color: #bbb8ab;">&gt;</span> <span style="color: #111; font-style: italic;">greetPerson</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`goodbye`</span><span style="color: #bbb8ab;">,</span> p<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">,</span>
  <span style="color: #ccc8bc;">)</span>

<span style="color: #111; font-style: italic;">onBoard</span><span style="color: #ccc8bc;">(</span>person<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>
<pre class="example">
hello bonnie billy
goodbye BONNIE Jones
{
  first: 'BONNIE',
  last: 'Jones',
  occupation: 'programmer',
  relationship: 'hitched'
}
</pre>



<p>
<i>almost there</i>.  we can make it even better using partials!
</p>

<p>
From the previous section, we learned how to create partial versions of our functions.  We can automatically curry all of our helper functions like this:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">greetPerson_</span> = <span style="color: #111; font-style: italic;">curry</span><span style="color: #ccc8bc;">(</span>greetPerson<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
<span style="color: #666;">const</span> <span style="color: #333;">fixCapitalization_</span> = <span style="color: #111; font-style: italic;">curry</span><span style="color: #ccc8bc;">(</span>fixCapitalization<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
<span style="color: #666;">const</span> <span style="color: #333;">setOccupation_</span> = <span style="color: #111; font-style: italic;">curry</span><span style="color: #ccc8bc;">(</span>setOccupation<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
<span style="color: #666;">const</span> <span style="color: #333;">setLastName_</span> = <span style="color: #111; font-style: italic;">curry</span><span style="color: #ccc8bc;">(</span>setLastName<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
<span style="color: #666;">const</span> <span style="color: #333;">setRelationshipStatus_</span> = <span style="color: #111; font-style: italic;">curry</span><span style="color: #ccc8bc;">(</span>setRelationshipStatus<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>
<p>
(I postfixed each function name with _ to indicate it is a curried version.)
</p>

<p>
this small change will allow us to write our code like this:
</p>

<div class="org-src-container">
<pre class="src src-jupyter-typescript"><span style="color: #666;">const</span> <span style="color: #333;">onBoard</span> =
  <span style="color: #111; font-style: italic;">pipe</span><span style="color: #ccc8bc;">(</span>
    <span style="color: #333;">greetPerson_</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`hello`</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">,</span>
    fixCapitalization_<span style="color: #bbb8ab;">,</span>
    <span style="color: #333;">setOccupation_</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`programmer`</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">,</span>
    <span style="color: #333;">setLastName_</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`Jones`</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">,</span>
    <span style="color: #333;">setRelationshipStatus_</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`hitched`</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">,</span>
    <span style="color: #333;">greetPerson_</span><span style="color: #ccc8bc;">(</span><span style="color: teal;">`goodbye`</span><span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">,</span>
  <span style="color: #ccc8bc;">)</span>

<span style="color: #111; font-style: italic;">onBoard</span><span style="color: #ccc8bc;">(</span>person<span style="color: #ccc8bc;">)</span><span style="color: #bbb8ab;">;</span>
</pre>
</div>
<pre class="example">
hello bonnie billy
goodbye BONNIE Jones
{
  first: 'BONNIE',
  last: 'Jones',
  occupation: 'programmer',
  relationship: 'hitched'
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org4c4ae8a" class="outline-3">
<h3 id="org4c4ae8a"><span class="section-number-3">1.7</span> Ciao Ciao</h3>
<div class="outline-text-3" id="text-1-7">
<p>
Well, I hope you enjoyed this very short introduction to functional concepts in javascript.  For me, they have brought a lot of joy to programming that I thought were missing before.  And, while I would personally never consider code poetry, these techniques do bring a certain amount of grace to complicated concepts, while also stopping bugs, enabling easy testing, and keeping me from throwing my computer out of the window.
</p>

<p>
Have a good evening!
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: John Doe</p>
<p class="date">Created: 2021-02-03 Wed 04:40</p>
</div>
</body>
</html>
